description: Execute make gen in order to rebuild the generated protobuf files locally
parameters:
  protoc_version:
    description: Version of protoc-gen-go to install
    default: "v1.3.2"
    type: string
steps:
  - run:
      name: '[go] install deps'
      command: |
        cd ../
        go get -u github.com/vektra/mockery/cmd/mockery \
        golang.org/x/tools/cmd/goimports \
        github.com/golang/protobuf/protoc-gen-go@<<parameters.protoc_version>>
  - run: make gen
