description: |
  Publish scala snapshot/relaease library to nexus.

usage:
  version: 2.1

  orbs:
    ta-scala: travelaudience/scala@x.y.z

  filter_tags: &filter_tags
    tags:
      # release:  'v{major}.{minor}.{patch}'
      # snapshot: 'v{major}.{minor}.{patch}-SNAPSHOT'
      only: /^v([0-9]+)\.([0-9]+)\.([0-9]+)(?:-SNAPSHOT)?$/

  workflows:
    version: 2
    scala_publish_library:
      jobs:
        - ta-scala/checkout_with_nexus_credentials
        - ta-scala/run_static_checks:
            requires:
              - ta-scala/checkout_with_nexus_credentials
        - ta-scala/compile:
            requires:
              - ta-scala/run_static_checks
        - ta-scala/publish:
            requires:
              - ta-scala/compile
            filters:
              <<: *filter_tags
